let express,bodyParser,cors,sendgrid;_d3b‍.w("express",[["default",["express"],function(v){express=v}]]);_d3b‍.w("body-parser",[["default",["bodyParser"],function(v){bodyParser=v}]]);_d3b‍.w("cors",[["default",["cors"],function(v){cors=v}]]);_d3b‍.w("@sendgrid/mail",[["default",["sendgrid"],function(v){sendgrid=v}]]);



require("dotenv").config();

const app = express();

app.use(express.urlencoded({ extended: true })); //parse url data of type encoded
app.use(express.json());
app.use(cors());
app.use((req, res, next) => {
	res.setHeader('Access-Control-Allow-Origin', '*');
	res.setHeader('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');
	res.setHeader('Access-Control-Allow-Headers', 'Content-Type, Authorization');
	next();
});

app.get('/api', (req, res) => {
	res.send('API Status: Running');
});

app.post('api/email', (req, res) => {
	sendgrid.setApiKey(process.env.SENDGRID_API_KEY);
	const msg = {
		to: 'rinavolovich@gmail.com',
		from: req.body.email,
		subject: 'Website Contact Attempt',
		text: req.body.message
	}
	sendgrid.send(msg)
		.then(result => {
			res.status(200).json({
				success: true
			});
		})
		.catch(err => {
			_d3b‍.g.console.log('error', err);
			res.status(401).json({
				success: false
			});
		});
});
const port = process.env || 3030;
_d3b‍.g.console.log(process);
app.listen(port, () => console.log(`Server is running on port ${port}`));